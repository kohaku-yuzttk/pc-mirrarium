<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>探索者ミラリウム</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>探索者ミラリウム</h1>
  <div class="carousel" id="carousel"></div>

  <script>
  //探索者カード生成処理
  fetch('pc-data.json')
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('carousel');
      data.forEach(seeker => {
        const card = document.createElement('div');
        card.className = 'card';

        // focusが指定されていれば使い、なければ center top を使う
        const focus = seeker.focus || 'center top';

        card.innerHTML = `
          <img src="${seeker.image}" alt="${seeker.name}" style="object-position:${focus};">
          <h2>${seeker.name}</h2>
          <p>職業：${seeker.job}<br>通過シナリオ：${seeker.scenario}</p>
        `;
        container.appendChild(card);
      });
    })
    .catch(error => {
      console.error('JSON読み込みエラー:', error);
    });
  </script>
  <script>
	// カルーセル中央のカードに .active を付与
	const container = document.getElementById('carousel');

	container.addEventListener('scroll', () => {
		const cards = container.querySelectorAll('.card');
		const containerRect = container.getBoundingClientRect();

		cards.forEach(card => {
			const cardRect = card.getBoundingClientRect();
			const cardCenter = cardRect.left + cardRect.width / 2;
			const containerCenter = containerRect.left + containerRect.width / 2;
			const distance = Math.abs(containerCenter - cardCenter);

			if (distance < cardRect.width / 2) {
				card.classList.add('active');
			} else {
				card.classList.remove('active');
			}
		});
	});
  </script>
</body>
</html>
